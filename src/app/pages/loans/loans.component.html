<section class="p-6 space-y-6">
  <div>
    <h1 class="text-2xl font-bold">Loans</h1>
    <p>View details of your loans in a structured way.</p>
  </div>

  <!-- Second Table -->
  <div class="space-y-3">
    <div class="flex items-center justify-between">
      <h2 class="text-xl font-semibold">Loan Details</h2>
      <button
        class="bg-slate-800 text-white px-4 py-1 rounded-md hover:bg-slate-900 cursor-pointer"
        (click)="openModal()"
      >
        Add Loan
      </button>
    </div>

    <div class="">
      <app-table [data]="data" [columns]="columns"></app-table>
    </div>
  </div>

  <div class="space-y-3">
    <div class="flex items-center justify-between">
      <h2 class="text-xl font-semibold">Amortization Details</h2>
    </div>

    <div class="">
      <app-table [data]="amortData" [columns]="amortColumns"></app-table>
    </div>
  </div>
</section>

<app-modal [isOpen]="isModalOpen">
  <form class="space-y-6 px-2" [formGroup]="formData" (ngSubmit)="onSubmit()">
    <!-- Name Field -->
    <div>
      <label class="font-bold">Name</label>
      <input
        formControlName="name"
        type="text"
        class="w-full mt-1 px-2 py-1 border rounded-md shadow-sm focus:ring focus:ring-slate-200 focus:border-slate-400"
        placeholder="Enter transaction name"
        [attr.style]="
          formData.controls['name'].invalid && formData.controls['name'].touched
            ? 'border-color: red'
            : ''
        "
      />
      @if(formData.controls['name'].invalid &&
      formData.controls['name'].touched){
      <span class="text-sm text-red-500">Name is required.</span>
      }
    </div>

    <!--Amount Field-->
    <div>
      <label class="font-bold">Amount</label>
      <input
        formControlName="amount"
        type="number"
        class="w-full mt-1 px-2 py-1 border rounded-md shadow-sm focus:ring focus:ring-slate-200 focus:border-slate-400"
        placeholder="Enter amount"
        [attr.style]="
          formData.controls['amount'].invalid &&
          formData.controls['amount'].touched
            ? 'border-color: red'
            : ''
        "
      />
      @if(formData.controls['amount'].invalid &&
      formData.controls['amount'].touched){
      <span class="text-sm text-red-500">Amount should be greater than 1</span>
      }
    </div>

    <!-- Rate of Interest Field -->
    <div>
      <label class="font-bold">Rate of Interest (%)</label>
      <input
        formControlName="roi"
        type="number"
        class="w-full mt-1 px-2 py-1 border rounded-md shadow-sm focus:ring focus:ring-slate-200 focus:border-slate-400"
        placeholder="Enter interest rate"
        [attr.style]="
          formData.controls['roi'].invalid && formData.controls['roi'].touched
            ? 'border-color: red'
            : ''
        "
      />
      @if(formData.controls['roi'].invalid && formData.controls['roi'].touched){
      <span class="text-sm text-red-500"
        >Rate of Interest should be greater than 1%</span
      >
      }
    </div>

    <!-- Start Date (Date Picker) -->
    <div>
      <label class="font-bold">Start Date</label>
      <input
        formControlName="startDate"
        type="date"
        class="w-full mt-1 px-2 py-1 border rounded-md shadow-sm focus:ring focus:ring-slate-200 focus:border-slate-400"
        [attr.style]="
          formData.controls['startDate'].invalid &&
          formData.controls['startDate'].touched
            ? 'border-color: red'
            : ''
        "
      />
      @if(formData.controls['startDate'].invalid &&
      formData.controls['startDate'].touched){
      <span class="text-sm text-red-500">Start date is required.</span>
      }
    </div>

    <!-- Tenure Field -->
    <div>
      <label class="font-bold">Tenure (Months)</label>
      <input
        formControlName="tenure"
        type="number"
        class="w-full mt-1 px-2 py-1 border rounded-md shadow-sm focus:ring focus:ring-slate-200 focus:border-slate-400"
        placeholder="Enter loan tenure in months"
        [attr.style]="
          formData.controls['tenure'].invalid &&
          formData.controls['tenure'].touched
            ? 'border-color: red'
            : ''
        "
      />
      @if(formData.controls['tenure'].invalid &&
      formData.controls['tenure'].touched){
      <span class="text-sm text-red-500">Tenure must be at least 1 month.</span>
      }
    </div>

    <div class="flex items-center justify-end space-x-3 mt-10">
      <button
        type="button"
        class="border border-slate-300 px-2 py-1 rounded-md cursor-pointer"
        (click)="closeModal()"
      >
        Cancel
      </button>
      <button
        type="submit"
        class="bg-green-700 text-white px-4 py-1 rounded-md cursor-pointer"
      >
        Save
      </button>
    </div>
  </form></app-modal
>
